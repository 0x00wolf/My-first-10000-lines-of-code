### Protocols and Servers ###

$: Telnet
Application layer protocol to connect to a virtual terminal of another computer.
Is not encrypted. All traffic is clear text.
Send request->auth in->terminal/root-terminal
ex:	telnet 10.10.105.184


$: HTTP
~Hypertext Transfer Porotocl (HTTP) to transfer web pages~
ex: Host web browser connects to webserver with HTTP and requests
HTML pages, images, and any other files.

ex2: Using Telnet to connect to a webserver
1) Host connects to port 80 using $: telnet 10.10.105.184 80
2) Host user types: GET /index.html HTTP/1.1 to retrieve the index.html
or, GET / HTTP/1.1 to retrieve the default page
3) Host user provides some for value for the host like host: telnent
and the enter key twice to resolve the request.

Popular choices for HTTP servers:
Apache *open source
Internet Information Service (IIS) *closed source
nginx *open source


$: FTP
~File Transfer Protocol (FTP) was developed to efficiently transfer~
files between computers. 
FTP servers listen on port 21 instead of the default Telnet port.

The following commands can be used once logged into an FTP server via Telnet:
Command		Explanation
* STAT 		can provide additional information
* SYST 		command shows the system type of the target
* PASV 		switches the mode to passive
		*There are 2 modes for FTP:
		Active: The data is sent over a separate channel originating from FTP 
			server's port 20.
		Passive: The data is sent over a separate channel originating from 
			 an FTP client's port above port number 1023.
* TYPE A switches the file transfer mode to ASCII
* ascii swithces to ASCII
* TYPE I switches the file transfer mode to Binary 
* ls		to list the files
* get FILENAME	to establish another channel for transfer
* exit		bye bye

example FTP server software:
vsftpd, ProFTPD, uFTP
example FTP clients:
Linux console clients, FileZilla(GUI), some web browsers

ex usage:
ftp <target_ip>


$: SMTP
~Simple Mail Transfer Protocol (SMTP)~
Plumbing - Emails require the following components:
1) Mail Submission Agent (MSA)
2) Mail Transfer Agent (MTA)
3) Mail Delivery Agent (MDA)
4) Mail User Agent (MUA)

Order of operations for an SMTP transfer:
1) -MUA has an email to send
   -Contacts a Mail submission agent
2) -MSA receives the message
   -Checks for errors b4 transferring to a MTA
3) -MTA will send the email to the MTA of the recipient
   -MTA can also function as a MSA
4) -Typically the MTA server will act as the MDA
5) -The recipient will collect its email from the mDA using their email client.

Protocols for email transmission:
1) Simple Mail Transfer Protocol (SMTP)
2) Post Office Protocol Version 3 (POP3) or Internet Message Access Protocol (IMAP)

SMTP default port - 25


$: POP3
~Post Office Protocol version 3 (POP3)~
A protocol used to downlaod the email messages from the
Mail Delivery Agent (MDA) to the host system.
POP3 default port 110

example:
telnet <TARGET_IP> 110
blah blah >>
USER username
PASS password
STAT
LIST
RETR <NUM_EMAIL>


$: IMAP
Internet Messaging Protocol (IMAP)
More sophisticated than POP3
Synchronize account over multiple devices
usage example:
telnet <TARGET_IP> 143
c1 LOGIN username password
c2 LIST "" "*"
c3 EXAMINE INBOX
c4 LOGOUT


$: DEFAULT PORTS
Protocol |	TCP Port |	Application(s)	|	DATA SECURITY
FTP		21		File Transfer		Cleartext
HTTP		80		Worldwide Web		Cleartext
IMAP		143		EMAIL (MDA)		Cleartext
POP3		110		Email (MDA)		Cleartext
SMTP		25		Email (MDA)		Cleartext
Telnet		23		Remote Access		Cleartext


$: CIADAD
Confidentiality, Integrity, Availability, Disclosure, Alteration, Destruction


$: ATTACKS 

=>Sniffing Attack
Using a network packet capture tool to collect information about the target.
Requires root. Using an Ethernet (802.3) network card
Example programs:
Tcpdump - free os cli prgram
Wireshark 0 free open source gui program
Tshark - cli alternative to wireshark

ex.:
sudo tcpdump port 110 -A
-A displays the contents of the captured packets in ASCII format

=> Man-in-the-Middle (MITM) Attack
example programs: Ettercap, and Bettercap

=> Password Attacks:
THC Hydra for password brute force
supports many protocols, FTP, POP3, IMAP, SMTP, SSH and all varieties of HTTP
ex usage:
hydra -l username -P wordlist.tt server service
-l username		the login username of the target
-P wordlist		the Password wordlist
server		the hostname or ip address of the target server
service		inidcates which service you are trying to launch the dictionary attack

another example:
hydra -l targetsusername -P /usr/share/wordlists/rockyyou.txt <targetsIP> <service>
ie:
hydra -l bobfrench -P /usr/share/wordslists/rockyou.txt 149.102.10.144 ftp

Optional arguments:
-s PORT to specify a non-default port for the service in question
-V or -vV for verbose
-t n 	where n is the number of parrallel connections to the targets
	ex: -t 16	will create 16 threads of connection to the target
-d 	for debugging



$: Transport Layer Security (TLS)
Adds encryption on the presentation layer of the ISO/OSI model:

ISO/OSI network layers
7	Application Layer	HTTP,FTP,SMTP,POP3,IMAP,etc
6	Presentation Layer	SSL,TLS
5	Session Layer		
4	Transport Layer		TCP,UDP
3	Network Layer		IPv4,IPv6
2	Data Link Layer		
1	Physical Layer

Cleartext protocols can be upgraded to use encryption via SSL/TLS

Default ports for upgraded cleartext protocol via TLS:
Protocol	Default Port	Secured Protocol	Default Port w/ TLS
HTTP		80		HTTPS			443
FTP		21		FTPS			990
SMTP		25		SMTPS			465
POP3		110		POP3S			995
IMAP		143		IMAPS			993



Protocol	TCP Port	Application		Data Security
FTP		21		File Transfer		Cleartext
FTPS		990		File Transfer		Encrypted
HTTP		80		Worldwide Web		Cleartext
HTTPS		443		Worldwide Web		Encrypted
IMAP		143		Email (MDA)		Cleartext
POP3		110	        Email (mda)		Cleartext
POP3S		995		Email (MDA)		Encrypted
SFTP		22		File Transfer		Encrypted
SSH		22		Remote Access &		Encrypted
				File Transfer	
SMTP		25		Email (MTA)		Cleartext
SMTPS		465		Email (MTA)             Encrypted
Telnet		23		Remote Access		Cleartext


Hydra options cheat sheet:
Option:		Explanation
-l username	provide login name
-P WordList.txt Specfy the password list to use
server service  Set the server address and service to attack
-s PORT		Use in case of non-default service port number
-V or -vV	show the username and password combos being tried (verbose)
-d		Display debugging output if the verbose output isn't helping			
